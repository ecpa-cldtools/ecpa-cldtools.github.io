/** Functions and helpers */

function parseQuery(query) {
  var Params = new Object();
  if (!query) return Params; // return empty object
  var Pairs = query.split(/[;&]/);
  for (var i = 0; i < Pairs.length; i++) {
    var KeyVal = Pairs[i].split("=");
    if (!KeyVal || KeyVal.length != 2) continue;
    var key = decodeURI(KeyVal[0]);
    var val = decodeURI(KeyVal[1]);
    val = val.replace(/\+/g, " ");
    Params[key] = val;
  }
  return Params;
}

/** Processor methods */

function testScript() {
  let script = document.currentScript;
  let myScript = script.getAttribute("src");

  var queryString = myScript.replace(/^[^\?]+\??/, "");

  console.log("myScript", myScript);
  console.log("queryString", queryString);
  console.log("Params", parseQuery(queryString));
}

/***********************************/
/** Main() */

testScript();
